(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{86987:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var l=n(67294),r=n(66468),s=n(85893);function i(e){var t=e.add,n=(0,l.useRef)(null),i=(0,l.useState)(""),o=i[0],a=i[1],c=(0,l.useState)(!1),u=c[0],d=c[1],h=null,x=function(e){if(e&&e.length)if((0,r.u)(e))if(a(""),function(e){for(var t=0;t<e.length;t++)if(!e[t].name.includes("."))return!0;return!1}(e))a("Your files have folder!");else{var n=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}(e);t&&t(n)}else a("Your file weight more than 10 MB")},f=function(e){e.preventDefault(),e.stopPropagation()};return(0,s.jsxs)("div",{onDrop:function(e){f(e);var t=e.dataTransfer.files;x(t),d(!1)},onDragEnter:function(e){f(e),h=e.target},onDragOver:function(e){f(e),d(!0)},onDragLeave:function(e){h==e.target&&(f(e),d(!1))},className:"p-5 myShadow rounded relative",children:[(0,s.jsx)("input",{type:"file",ref:n,className:"w-0",onChange:function(e){var t=e.currentTarget.files;x(t)},multiple:!0}),(0,s.jsx)("button",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},className:"text-blue-600 hover:text-blue-500 hover:cursor-pointer",children:"Select a file"}),(0,s.jsx)("span",{children:" or drag in form"}),o?(0,s.jsx)("p",{className:"text-red-500 text-sm",children:o}):(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"PNG, jpg, gif files up to 10 MB in size are available for download"}),u&&(0,s.jsx)("div",{className:"absolute w-full h-full flex items-center justify-center top-0 left-0 bg-white border-2 border-black border-dashed rounded",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48px",viewBox:"0 0 24 24",width:"48px",fill:"#000000",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})]})})]})}},54899:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var l=n(67294),r=n(8798),s=n(85893);function i(e){var t=e.file,n=t.name,i=t.size,o=(t.id,e.checkIsUserAdmin),a=(0,l.useContext)(r.UserContext).role;return(0,s.jsxs)("div",{className:"p-5 myShadow rounded flex items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[n,(0,s.jsx)("span",{className:"text-gray-400 ml-2",children:i})]}),(!o||"admin"===a)&&(0,s.jsx)("button",{className:"text-blue-600 hover:text-blue-500 hover:cursor-pointer mt-2",children:"Delete a file"})]}),(0,s.jsx)("button",{className:"ml-auto bg-gray-100 hover:bg-gray-200 w-14 h-14 rounded-full flex items-center justify-center hover:cursor-pointer",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#4158D0",children:[(0,s.jsx)("g",{children:(0,s.jsx)("rect",{fill:"none",height:"24",width:"24"})}),(0,s.jsx)("g",{children:(0,s.jsx)("path",{d:"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z"})})]})})]})}function o(e){var t=e.files,n=e.checkIsUserAdmin,l=void 0!==n&&n;return(0,s.jsx)("div",{className:"py-16 flex flex-col xl:grid grid-cols-2 gap-9",children:t.map((function(e){return(0,s.jsx)(i,{file:e,checkIsUserAdmin:l},e.id)}))})}},36485:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var l=n(85893);function r(){return(0,l.jsx)("div",{className:"relative animate-spin w-16 h-16 border-8 border-blue-500 rounded-full",children:(0,l.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-y-full -translate-x-1/2 w-2 h-2 bg-white"})})}},66468:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var l=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].size;return!(t>20971520)}},85714:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var l=n(9008),r=n(67294),s=n(86987),i=n(15785),o=n(74140),a=n(8798),c=n(2147),u=n(85893);function d(){var e=(0,r.useState)(""),t=e[0],n=e[1],l=(0,r.useState)([]),s=l[0],d=l[1],h=(0,r.useRef)(null),x=(0,r.useRef)(null),f=(0,r.useContext)(a.UserContext).user,p=(0,r.useState)(null),m=p[0],v=p[1];return(0,r.useEffect)((function(){var e,t;s.length>200&&d(s.slice(1)),null===(e=x.current)||void 0===e||e.scroll({top:null===(t=x.current)||void 0===t?void 0:t.scrollHeight,behavior:"smooth"})}),[s]),(0,r.useEffect)((function(){var e=(0,o.io)(c.z,{extraHeaders:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});return e.on("chat-msg-server",(function(e){d((function(t){return[].concat((0,i.Z)(t),[e])}))})),v(e),function(){e.disconnect()}}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("form",{className:"fixed left-0 top-0 w-full h-full pb-24 hidden xl:flex flex-col justify-end bg-white px-4 xl:pr-0 xl:top-auto xl:static xl:left-auto xl:bottom-0 xl:right-0 xl:h-auto xl:py-0",onSubmit:function(e){e.preventDefault(),t&&(m.emit("chat-msg-client",{msg:t,username:f.username}),n(""))},ref:h,children:[(0,u.jsx)("div",{className:"flex flex-col py-2 gap-2 xl:max-h-96 overflow-auto",ref:x,children:s.map((function(e,t){var n=e.msg,l=e.username;return f.username===l?(0,u.jsx)("p",{className:"py-2 px-4 ml-auto bg-blue-600 rounded-3xl max-w-3/4 mr-3 text-white break-words",children:n},t):(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-full bg-black"}),(0,u.jsx)("p",{className:"py-2 px-4 bg-white rounded-3xl max-w-3/4 border border-gray-200 break-words",children:n})]},t)}))}),(0,u.jsx)("input",{type:"text",placeholder:"Type here...",className:"w-full rounded outline-none myShadow py-4 px-2 mr-4 xl:mr-0 mt-8",value:t,onChange:function(e){return n(e.target.value)}})]}),(0,u.jsx)("button",{className:"p-5 rounded-full bg-blue-600 fixed bottom-5 right-5 hover:cursor-pointer xl:hidden",onClick:function(){var e,t;null===(e=h.current)||void 0===e||e.classList.toggle("hidden"),null===(t=h.current)||void 0===t||t.classList.toggle("flex");var n=document.body.style.overflow;document.body.style.overflow=n?"":"hidden"},children:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 4h16v12H5.17L4 17.17V4m0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm2 10h8v2H6v-2zm0-3h12v2H6V9zm0-3h12v2H6V6z"})]})})]})}var h=n(54899),x=n(66468),f=n(78700),p=n(58281),m=n(36485);function v(e){var t=e.file,n=(0,r.useState)(0),l=n[0],s=n[1],i=(0,r.useState)(!1),o=i[0],a=i[1],c=(0,r.useState)(""),d=c[0],h=c[1],x=t.type.startsWith("image/")?URL.createObjectURL(t):void 0,v=t.type.startsWith("application/pdf")?URL.createObjectURL(t):void 0,g=(0,r.useState)(!1),j=g[0],w=g[1],b=function(){var e,n=10240;e=t.size<l+n?t.slice(l,t.size):t.slice(l,l+n);var r=new FileReader;r.onload=function(e){var t;h(d+(null===(t=e.target)||void 0===t?void 0:t.result)),s(l+n),a(!1)},r.onerror=function(){h("There was a problem with file processing. Please load file once again!"),a(!1)},r.readAsText(e)};return(0,r.useEffect)((function(){j&&!d&&(t.type.startsWith("text/")||t.type.startsWith("application/json"))?b():(s(0),h(""),a(!1))}),[j]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"cursor-pointer",onClick:function(){a(!0),w(!0),document.body.style.overflow="hidden"},children:x?(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#2563eb",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"})]}):(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#2563eb",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"})]})}),j&&(0,u.jsxs)("div",{className:"fixed z-40 flex items-center justify-center w-screen h-screen left-0 top-0 bg-white md:p-16 bg-opacity-90 backdrop-brightness-75",children:[(0,u.jsx)("button",{className:"bg-gray-400 text-3xl rounded-full w-10 h-10 absolute right-4 top-4 z-50",onClick:function(){w(!1),document.body.style.overflow="auto"},children:(0,u.jsx)("span",{children:"x"})}),x?(0,u.jsx)("img",{src:x,className:"max-h-full max-w-full"}):v?(0,u.jsx)("iframe",{src:v,className:"w-full h-full"}):o?(0,u.jsx)(m.Z,{}):d?(0,u.jsxs)("div",{className:"overflow-auto max-h-full",onScroll:function(e){var t=e.target;t.scrollHeight-t.offsetHeight<t.scrollTop+80&&b()},children:[(0,u.jsx)(f.Z,{showLineNumbers:!0,style:p.Z,children:d}),l<t.size&&(0,u.jsx)("div",{className:"w-full mx-auto bg-highlight flex justify-center pb-4",children:(0,u.jsx)(m.Z,{})})]}):(0,u.jsx)("p",{children:"Our preview doesn't support this file type"})]})]})}function g(e){var t=e.file,n=e.remove,l=Math.round(t.size/1048576),r=Math.round(t.size/1024),s=l?l+" MB":r+" KB";return(0,u.jsxs)("div",{className:"py-2 pl-2 pr-4 myShadow rounded flex items-center gap-2",children:[(0,u.jsx)(v,{file:t}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"break-all",children:t.name}),(0,u.jsx)("p",{className:"text-gray-400",children:s})]}),(0,u.jsx)("button",{className:"ml-auto bg-gray-100 p-2 rounded-full flex items-center justify-center hover:cursor-pointer hover:bg-gray-200",onClick:function(){return n()},children:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]})})]})}function j(e){var t=e.files,n=e.remove;return(0,u.jsx)("div",{className:"py-2 flex flex-col xl:grid grid-cols-2 gap-3",children:t.map((function(e,t){return(0,u.jsx)(g,{file:e,remove:function(){return n(t)}},t)}))})}function w(){var e=(0,r.useState)(""),t=e[0],n=e[1],l=(0,r.useState)([]),o=l[0],a=l[1],c=(0,r.useState)(null),d=c[0],h=c[1];return(0,r.useEffect)((function(){!(0,x.u)(o)&&o.length>0?h("Your files weights more than 10 MB!"):h(null)}),[o]),(0,u.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"flex flex-col gap-5",children:[(0,u.jsxs)("div",{className:"w-full h-16 px-5 myShadow flex flex-col justify-center rounded",children:[t&&(0,u.jsx)("p",{className:"text-sm text-gray-400 z-10",children:"Title"}),(0,u.jsx)("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Title",className:"outline-none h-8 z-0"})]}),(0,u.jsx)(s.Z,{add:function(e){a([].concat((0,i.Z)(o),(0,i.Z)(e)))}}),o.length>0&&(0,u.jsx)(j,{remove:function(e){a(o.filter((function(t,n){return n!==e})))},files:o}),d&&(0,u.jsx)("p",{className:"text-red-600 text-center",children:d}),(0,u.jsxs)("button",{type:"submit",className:"w-28 xl:ml-auto bg-blue-600 hover:bg-blue-700 text-white rounded-3xl flex px-5 py-3 gap-2",children:[(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#FFFFFF",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z"})]}),(0,u.jsx)("span",{children:"Send"})]})]})}function b(e){var t=e.name,n=(0,r.useContext)(a.AuthContext).setIsLoggedIn,l=(0,r.useContext)(a.UserContext).setUser;return(0,u.jsxs)("div",{className:"flex justify-end items-center gap-4",children:[(0,u.jsx)("p",{className:"text-blue-600",children:t}),(0,u.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 p-2 rounded-full",onClick:function(){localStorage.removeItem("token"),n(!1),l(void 0)},children:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#ffffff",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]})})]})}var y=n(4942),N=n(11163);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}var S=function(e){return function(t){var n=(0,N.useRouter)(),l=(0,r.useContext)(a.AuthContext).isLoggedIn;return(0,r.useEffect)((function(){l||n.replace("/login")})),l?(0,u.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)):null}}((function(){var e=(0,r.useState)(""),t=e[0],n=e[1],i=(0,r.useState)([{id:"34rdsads",name:"something.mp4",size:"7 MB"},{id:"34sdsads",name:"something.mp4",size:"7 MB"}]),o=i[0],c=(i[1],(0,r.useContext)(a.UserContext).user.username);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.default,{children:(0,u.jsx)("title",{children:"Home | Send your work"})}),(0,u.jsxs)("div",{className:"p-7 md:py-14 md:px-12 w-full flex flex-col xl:flex-row min-h-screen",children:[(0,u.jsxs)("div",{className:"order-2 w-full xl:w-4/5 xl:order-none",children:[(0,u.jsxs)("div",{className:"flex flex-col xl:grid grid-cols-2 gap-9",children:[(0,u.jsxs)("div",{className:"myShadow w-full p-5 flex items-center",children:[(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#1111117A",children:[(0,u.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,u.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]}),(0,u.jsx)("input",{type:"text",value:t,className:"outline-none ml-2 w-full",placeholder:"Search",onChange:function(e){return n(e.target.value)}})]}),(0,u.jsx)(s.Z,{})]}),(0,u.jsx)(h.Z,{files:o}),(0,u.jsx)("div",{className:"w-full xl:w-5/12",children:(0,u.jsx)(w,{})})]}),(0,u.jsxs)("div",{className:"flex flex-col xl:w-1/5 order-1 mb-5 xl:mb-0 xl:order-none gap-8 xl:min-h-full justify-between",children:[(0,u.jsx)(b,{name:c}),(0,u.jsx)(d,{})]})]})]})}))},91344:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(85714)}])}},function(e){e.O(0,[217,623,774,888,179],(function(){return t=91344,e(e.s=t);var t}));var t=e.O();_N_E=t}]);